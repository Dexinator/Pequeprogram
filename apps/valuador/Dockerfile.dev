# Usar Node.js como base
FROM node:20-alpine

# Establecer directorio de trabajo
WORKDIR /app

# Instalar pnpm globalmente
RUN npm install -g pnpm

# Copiar package.json para instalar dependencias
COPY package*.json ./
# Instalar dependencias explícitamente
RUN pnpm install
RUN pnpm add tailwindcss@4.1.0

# Copiar archivos de configuración
COPY astro.config.mjs ./
COPY tailwind.config.mjs ./
COPY tsconfig.json ./

# Copiar el código fuente
COPY src/ ./src/

# Puerto que usará Astro
EXPOSE 4321

# Comando para ejecutar en modo desarrollo
CMD ["pnpm", "run", "dev", "--host", "0.0.0.0", "--port", "4321"] 