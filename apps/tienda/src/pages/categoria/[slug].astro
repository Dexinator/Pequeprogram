---
import Layout from '../../layouts/Layout.astro';
import Subcategories from '../../components/shop/Subcategories';
import categoryGroupsComplete from '../../data/categoryGroupsComplete.js';

// Obtener el slug de la categoría
const { slug } = Astro.params;

// Buscar la categoría en la estructura completa
let category = null;
for (const [name, data] of Object.entries(categoryGroupsComplete)) {
  if (data.slug === slug) {
    category = {
      id: data.id,
      name,
      slug: data.slug,
      icon: data.icon,
      groups: data.groups
    };
    break;
  }
}

if (!category) {
  return Astro.redirect('/categorias');
}
---

<Layout title={`${category.name} - Entrepeques`}>
  <Subcategories 
    categoryId={category.id} 
    categoryName={category.name}
    categoryIcon={category.icon}
    categoryGroups={category.groups}
    client:only="react" 
  />
</Layout>